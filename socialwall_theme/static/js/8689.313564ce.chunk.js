"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var a=t(89379),i=t(9950),l=t(14478),s=t(73878),r=t(52867),o=t(80415),d=t(66345),u=t(78213),c=t(44414);const g=i.lazy(()=>t.e(2804).then(t.bind(t,2804))),h=i.lazy(()=>t.e(726).then(t.bind(t,80726))),p=i.lazy(()=>t.e(693).then(t.bind(t,50693))),m=i.lazy(()=>t.e(501).then(t.bind(t,40501))),v=i.lazy(()=>Promise.all([t.e(1397),t.e(56)]).then(t.bind(t,70056))),b=i.lazy(()=>Promise.all([t.e(8400),t.e(6337)]).then(t.bind(t,65518)));class k extends i.PureComponent{constructor(){super(),this.handleResize=()=>{this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}})},this.onLoadSpotLight=()=>{if(d.aD&&!d.yR){const{postData:n}=this.props;if(n.completeDataObject&&Object.keys(n.completeDataObject).length>0){var e=null;Object.entries(n.completeDataObject).forEach(n=>{let[t,a]=n;1==(null===a||void 0===a?void 0:a.highlight)&&null==e&&(e=a)}),e&&Object.keys(e).length>0&&(0,u.ar)(e)}}},this.state={containerSize:{width:null,height:null},parentID:""},this.containerRef=i.createRef()}componentDidMount(){(0,r.j1)(this.props.wall.Personalization.widgetTheme),window.addEventListener("resize",this.handleResize),this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}}),this.onLoadSpotLight()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(){var e;let n=document.querySelector(".tb_app_container"),t=r.wV?r.wV:null===n||void 0===n||null===(e=n.parentNode)||void 0===e?void 0:e.id;this.setState({parentID:t})}render(){var e,n,t,l,s,u,k,f,S,j,w,B,x;const{wall:D,reviewFilters:z,webFilters:_,postData:y,languageSetting:I,filter_tags:R,spotlight:T,keyRender:P}=this.props,C=!!(D.Banner&&Object.keys(D.Banner).length>0&&(1===D.Banner.status&&1===D.Banner.banner_position||1===(null===D||void 0===D||null===(e=D.BannerImage)||void 0===e?void 0:e.status)||"1"===D.Banner.banner_position)),F=!!(D.Banner&&Object.keys(D.Banner).length>0&&(1===D.Banner.status&&2===D.Banner.banner_position||"2"===D.Banner.banner_position)),U=d.uS?![55,60,16,47,57].includes(D.Personalization.widgetTheme):![55,52,60,16,47,57,61].includes(D.Personalization.widgetTheme),H=!!(D.Banner&&Object.keys(D.Banner).length>0&&1===D.Banner.status&&6==D.Banner.bannerType&&0===D.Personalization.filterStatus&&57!=D.Personalization.widgetTheme),L=d.uS?1===D.Personalization.filterStatus:!!(_&&_.length>1),O=!!(R&&R.length>0),W=!(!d.aD||!T.status);let N=""!=_&&_&&_.length>0?_.map(e=>{let{Network:n}=e;return n.id}):null;!d.HY&&null!==D&&void 0!==D&&null!==(n=D.Background)&&void 0!==n&&n.image&&D.Background.image.includes(o.vr)&&(D.Background.image=String(D.Background.image).replace(o.Vy,""));const V=0===(null===D||void 0===D||null===(t=D.Background)||void 0===t?void 0:t.transparent)||null!==D&&void 0!==D&&null!==(l=D.Background)&&void 0!==l&&l.image&&d.uS?{backgroundImage:null!==D&&void 0!==D&&null!==(s=D.Background)&&void 0!==s&&s.image?"url(".concat(D.Background.image,")"):"",backgroundColor:null===D||void 0===D||null===(u=D.Background)||void 0===u?void 0:u.color}:null;return(0,c.jsxs)("div",{className:"tb_app_container ".concat(T.isWall?"":"tb_spotlight_ac"),style:{minHeight:d.yR?([47,16,49,55,60,52].includes(D.Personalization.widgetTheme),"100%"):null},ref:this.containerRef,children:[d.aD&&!d.Vn&&1===(null===(k=D.CustomTicker)||void 0===k?void 0:k.status)&&1==D.CustomTicker.ticker_position?(0,c.jsx)(p,{CustomTicker:D.CustomTicker,UgcSettings:D.UgcSettings}):null,C&&!W?(0,c.jsxs)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",(0,c.jsx)(g,{Banner:D.Banner,BannerImage:D.BannerImage,LogoImage:D.LogoImage})]}):"",(0,c.jsxs)("div",{className:"tb_app_wrapper",style:V,children:[H&&C?(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(h,{reviewFilters:z,appendData:y.appendData,wall:D,languageSetting:I,postData:y})}):null,"88"!=D.Personalization.widgetTheme&&(null!==D&&void 0!==D&&null!==(f=D.UserRule)&&void 0!==f&&f.on_site_upload&&null!==D&&void 0!==D&&null!==(S=D.UgcSettings)&&void 0!==S&&S.onsite_status||d.Qy&&null!==D&&void 0!==D&&null!==(j=D.UgcSettings)&&void 0!==j&&j.onsite_status&&(d.MH||d.HY&&!(0,r.Nv)(50)))?(0,c.jsxs)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",(0,c.jsx)(b,{UgcSettings:null===D||void 0===D?void 0:D.UgcSettings,id:null===D||void 0===D||null===(w=D.Wall)||void 0===w?void 0:w.id,tagShopWallId:null===D||void 0===D||null===(B=D.Wall)||void 0===B?void 0:B.wallId})," "]}):null,!d.aD&&U&&(L||O)?(0,c.jsxs)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",(0,c.jsx)(m,{type:D.Personalization.filter_type,webFilters:_,filter_tags:R,appendData:y.appendData,wall:D,languageSetting:I,postData:y})]}):"",!d.aD||!T.isWall&&W?null:(0,c.jsxs)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",(0,c.jsx)(v,(0,a.A)((0,a.A)({},this.props),{},{brandingNetworks:N,containerSize:this.state.containerSize,parentID:this.state.parentID}),P)]}),H&&F?(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(h,{reviewFilters:z,appendData:y.appendData,wall:D,languageSetting:I,postData:y})}):null]}),F&&!W?(0,c.jsxs)(i.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",(0,c.jsx)(g,{Banner:D.Banner,BannerImage:D.BannerImage,LogoImage:D.LogoImage})]}):"",d.aD&&!d.Vn&&1===(null===(x=D.CustomTicker)||void 0===x?void 0:x.status)&&2==D.CustomTicker.ticker_position?(0,c.jsx)(p,{CustomTicker:D.CustomTicker,UgcSettings:D.UgcSettings}):null]})}}const f=(0,s.Ng)(e=>{if(!0===e.postHeight.manage_height){return{postHeight:e.postHeight.data.replace("px",""),renderId:e.renderId}}return{renderId:e.renderId}},e=>({managePostHeight:n=>e((0,l.V3)(n))}))(k)}}]);