"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[6191],{3720(e,t,i){i.d(t,{A:()=>l});var o=i(9950),a=i(98776),s=i(19015),r=i(66345),d=i(44414);class n extends o.Component{constructor(e){super(e),this.calculatePadding=async()=>{const{data:e,size:t}=this.props;if(t)this.setState({paddingBottom:1===t?null:t});else if([3,4,5].includes(null===e||void 0===e?void 0:e.type))if(e.mediaHeight&&e.mediaWidth)this.setState({paddingBottom:100*e.mediaHeight/e.mediaWidth});else try{const{width:t,height:i}=await(0,a.pG)(e.postFileNew);this.setState({paddingBottom:100*i/t})}catch(i){this.setState({paddingBottom:100})}},this.initObserver=()=>{try{this.observer=new IntersectionObserver(e=>{let[t]=e;const i=this.videoRef.current;i&&(t.isIntersecting?(i.muted=!0,i.play().catch(()=>{})):(i.pause(),i.currentTime=0))},{threshold:.4}),this.wrapperRef.current&&this.observer.observe(this.wrapperRef.current)}catch(e){const t=this.videoRef.current;t&&(t.muted=!0,t.play().catch(()=>{}))}},this.state={paddingBottom:100,videoLoaded:!1},this.wrapperRef=o.createRef(),this.videoRef=o.createRef(),this.observer=null}componentDidMount(){this.calculatePadding(),this.initObserver()}componentWillUnmount(){this.observer&&this.wrapperRef.current&&this.observer.unobserve(this.wrapperRef.current);const e=this.videoRef.current;e&&(e.pause(),e.src="",e.load())}render(){const{VideoClass:e,data:t,wallID:i,isCover:o,controls:a,autoPlay:n,handleVideoEnded:l,muted:c,themeID:h,intervalTime:p}=this.props,{paddingBottom:u,videoLoaded:m}=this.state,v=[74,76,77].includes(h),w={paddingBottom:v&&r.aD?null:"".concat(u,"%")},b=null!==t&&void 0!==t&&t.loopStop?t.mediaUrl:t.mediaClip||t.mediaUrl;return(0,d.jsx)("div",{className:"".concat(e,"_wrap_ mediaHolder").concat(t.id),style:w,ref:this.wrapperRef,children:(0,d.jsx)("video",{ref:this.videoRef,className:"".concat(e," video").concat(t.id),muted:null===c||void 0===c||c,playsInline:!0,preload:"metadata",poster:t.postFileNew,controls:!!a,loop:!(null!==t&&void 0!==t&&t.loopStop),style:{width:"100%",height:"100%",objectFit:o?"cover":"contain",backgroundImage:m?"none":"url(".concat(t.postFileNew,")"),backgroundSize:"cover",backgroundPosition:"center"},"data-type":"video","data-network":t.network.id,"data-link":t.link,"data-wall-id":i,"data-item-id":t.id,"data-feed-id":t.feedId||"",onCanPlay:()=>r.HY?this.setState({videoLoaded:!1}):this.setState({videoLoaded:!0}),onEnded:l||null,onError:e=>{!r.yR||t.stories&&0!==t.stories||(0,s.zi)(e,t.id),v&&l&&setTimeout(()=>{l()},1e3*p)},children:(0,d.jsx)("source",{src:(f=b,g=t.network.id,25===g?String(f).replace("https://w.soundcloud.com/player/?url=",""):f),type:"video/mp4"})})});var f,g}}const l=(0,o.memo)(n)},50173(e,t,i){i.r(t),i.d(t,{default:()=>c});var o=i(9950),a=i(66345),s=i(15537),r=i(78262),d=i(3720),n=i(44414);const l=o.lazy(()=>Promise.resolve().then(i.bind(i,44463))),c=e=>{let{itemData:t,wallID:i,ThemeID:c,ownerId:h,wall:p}=e;const u=!(!a.HY||t.hotspot),m=!(3!==t.type&&5!==t.type||1!=p.ThemeRule.autoPlay&&a.HY);return(0,n.jsxs)("div",{className:"tb_ct_media_wrap",children:[a.uS?(0,n.jsx)("div",{className:"tb_ct_social_top_",children:(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)(n.Fragment,{}),children:(0,n.jsx)(l,{networkClass:"tb_ct_social__ico",network:t.network,isDefault:1===p.ThemeRule.iconType,ThemeRule:p.ThemeRule})})}):null,(0,n.jsx)(s.A,{itemData:t,IconClass:"tb_ct_media_icon",show:u}),m?(0,n.jsx)(d.A,{VideoClass:"tb_ct_video",data:t,wallID:i,themeID:p.Personalization.widgetTheme,ownerId:h,size:100,isCover:!0,muted:!0}):(0,n.jsx)(r.default,{ImageClass:"tb_ct_image",data:t,wallID:i,themeID:c,ownerId:h,size:100,hotspot:!!t.hotspot})]})}},80045(e,t,i){i.d(t,{A:()=>a});var o=i(98587);function a(e,t){if(null==e)return{};var i,a,s=(0,o.A)(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}}}]);