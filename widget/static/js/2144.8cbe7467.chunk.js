"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[2144],{3720(e,t,a){a.d(t,{A:()=>l});var i=a(9950),s=a(98776),o=a(19015),r=a(66345),n=a(44414);class d extends i.Component{constructor(e){super(e),this.calculatePadding=async()=>{const{data:e,size:t}=this.props;if(t)this.setState({paddingBottom:1===t?null:t});else if([3,4,5].includes(null===e||void 0===e?void 0:e.type))if(e.mediaHeight&&e.mediaWidth)this.setState({paddingBottom:100*e.mediaHeight/e.mediaWidth});else try{const{width:t,height:a}=await(0,s.pG)(e.postFileNew);this.setState({paddingBottom:100*a/t})}catch(a){this.setState({paddingBottom:100})}},this.initObserver=()=>{try{this.observer=new IntersectionObserver(e=>{let[t]=e;const a=this.videoRef.current;a&&(t.isIntersecting?(a.muted=!0,a.play().catch(()=>{})):(a.pause(),a.currentTime=0))},{threshold:.4}),this.wrapperRef.current&&this.observer.observe(this.wrapperRef.current)}catch(e){const t=this.videoRef.current;t&&(t.muted=!0,t.play().catch(()=>{}))}},this.state={paddingBottom:100,videoLoaded:!1},this.wrapperRef=i.createRef(),this.videoRef=i.createRef(),this.observer=null}componentDidMount(){this.calculatePadding(),this.initObserver()}componentWillUnmount(){this.observer&&this.wrapperRef.current&&this.observer.unobserve(this.wrapperRef.current);const e=this.videoRef.current;e&&(e.pause(),e.src="",e.load())}render(){const{VideoClass:e,data:t,wallID:a,isCover:i,controls:s,autoPlay:d,handleVideoEnded:l,muted:c,themeID:p,intervalTime:h}=this.props,{paddingBottom:u,videoLoaded:m}=this.state,v=[74,76,77].includes(p),w={paddingBottom:v&&r.aD?null:"".concat(u,"%")},g=null!==t&&void 0!==t&&t.loopStop?t.mediaUrl:t.mediaClip||t.mediaUrl;return(0,n.jsx)("div",{className:"".concat(e,"_wrap_ mediaHolder").concat(t.id),style:w,ref:this.wrapperRef,children:(0,n.jsx)("video",{ref:this.videoRef,className:"".concat(e," video").concat(t.id),muted:null===c||void 0===c||c,playsInline:!0,preload:"metadata",poster:t.postFileNew,controls:!!s,loop:!(null!==t&&void 0!==t&&t.loopStop),style:{width:"100%",height:"100%",objectFit:i?"cover":"contain",backgroundImage:m?"none":"url(".concat(t.postFileNew,")"),backgroundSize:"cover",backgroundPosition:"center"},"data-type":"video","data-network":t.network.id,"data-link":t.link,"data-wall-id":a,"data-item-id":t.id,"data-feed-id":t.feedId||"",onCanPlay:()=>r.HY?this.setState({videoLoaded:!1}):this.setState({videoLoaded:!0}),onEnded:l||null,onError:e=>{!r.yR||t.stories&&0!==t.stories||(0,o.zi)(e,t.id),v&&l&&setTimeout(()=>{l()},1e3*h)},children:(0,n.jsx)("source",{src:(_=g,b=t.network.id,25===b?String(_).replace("https://w.soundcloud.com/player/?url=",""):_),type:"video/mp4"})})});var _,b}}const l=(0,i.memo)(d)},63226(e,t,a){a.r(t),a.d(t,{default:()=>p});var i=a(9950),s=a(66345),o=a(15537),r=a(78262),n=a(3720),d=a(44414);const l=i.lazy(()=>a.e(8120).then(a.bind(a,68120))),c=i.lazy(()=>a.e(4463).then(a.bind(a,44463))),p=e=>{let{itemData:t,wallID:a,ThemeID:p,ownerId:h,wall:u}=e;t.hotspot;const m=(3===t.type||5===t.type)&&1==u.ThemeRule.autoPlay;!!s.uS&&(!!u.ThemeRule.aspectImageRatio&&u.ThemeRule.aspectImageRatio);return(0,d.jsxs)("div",{className:"tb_g_p_media_wrap",children:[s.Vn&&u.Personalization.interactive?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(l,{likeClass:"tb_g_p_like",postId:t.id,wallID:a,UserDetail:u.UserDetail})}):null,s.uS?(0,d.jsx)("div",{className:"tb_g_p_social_top_",children:(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(c,{networkClass:"tb_g_p_social__ico",network:t.network,isDefault:1===u.ThemeRule.iconType,ThemeRule:u.ThemeRule})})}):null,m?null:(0,d.jsx)(o.A,{itemData:t,IconClass:"tb_g_p_media_icon".concat(s.uS?" tb_g_p_media_icon_te":""),show:!0,isCenter:s.uS}),m?(0,d.jsx)(n.A,{VideoClass:"tb_g_p_video",data:t,wallID:a,themeID:p,ownerId:h,size:1,controls:!1,autoPlay:!0,isCover:!0,muted:!0}):(0,d.jsx)(r.default,{ImageClass:"tb_g_p_image",data:t,wallID:a,themeID:p,ownerId:h,size:1,hotspot:!!t.hotspot})]})}},80045(e,t,a){a.d(t,{A:()=>s});var i=a(98587);function s(e,t){if(null==e)return{};var a,s,o=(0,i.A)(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}}}]);