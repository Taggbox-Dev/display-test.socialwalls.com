"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[854],{20854:(e,l,a)=>{a.r(l),a.d(l,{addScript:()=>z,default:()=>C,isEditor:()=>I,onLoad:()=>L});var t=a(9950),n=a(73068),r=a(15255),s=a(11127),o=a(80415),i=a(52867),d=a(66345),h=a(14478),p=a(87988),c=a.n(p),u=a(44414);const w=t.lazy(()=>a.e(8689).then(a.bind(a,88689))),m=t.lazy(()=>a.e(5505).then(a.bind(a,25505))),j=t.lazy(()=>Promise.all([a.e(2772),a.e(4674)]).then(a.bind(a,84674))),g=t.lazy(()=>a.e(9468).then(a.bind(a,69468))),x=t.lazy(()=>a.e(2665).then(a.bind(a,92665))),b=t.lazy(()=>Promise.all([a.e(804),a.e(8615),a.e(8940),a.e(6197),a.e(3464),a.e(2433)]).then(a.bind(a,13147))),D=t.lazy(()=>Promise.all([a.e(804),a.e(8940),a.e(6197),a.e(8389),a.e(3464),a.e(4877)]).then(a.bind(a,64877))),f=t.lazy(()=>a.e(9563).then(a.bind(a,79563))),k=t.lazy(()=>a.e(495).then(a.bind(a,20495))),S=t.lazy(()=>a.e(5600).then(a.bind(a,5600))),y=t.lazy(()=>a.e(8813).then(a.bind(a,88813))),v=t.lazy(()=>a.e(2833).then(a.bind(a,82833))),F=t.lazy(()=>a.e(2902).then(a.bind(a,82902))),U=t.lazy(()=>a.e(5002).then(a.bind(a,85002))),E=t.lazy(()=>Promise.all([a.e(8092),a.e(804),a.e(8615),a.e(6002),a.e(8370)]).then(a.bind(a,66937))),P=t.lazy(()=>a.e(8768).then(a.bind(a,48768))),z=e=>{const l=document.createElement("script");l.src=e,l.defer=!0,document.head.appendChild(l)},I=!!window.isEditor,L=()=>{window.jQuery||z(`${o.M$}/js/jquery.min.js?ver=1`),z(`${o.M$}/js/slackdown.js?ver=1`)},M=e=>{var l;return e.loader&&null!=e.loader.loader&&null==e.error.errorWithMessage&&(!e.error.planLimit||d.HY)&&(null==e.error.themeError||Object.keys(e.error.themeError).length>0&&0==e.error.themeError.error_code||1===(null===(l=e.wall)||void 0===l?void 0:l.Personalization.demoWall))?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(w,{...e})}):!d.HY&&(e.error.errorWithMessage||e.error.planLimit||e.error.themeError)?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(m,{...e})}):null},W=(0,n.componentWillAppendToBody)(e=>{let{children:l}=e;return l}),O=e=>{let{appData:l}=e;const a=!!(l.wall.UserDetail&&Object.keys(l.wall.UserDetail).length>0);let t=""!=l.webFilters&&l.webFilters?l.webFilters.map(e=>{let{networkId:l}=e;return l}):null;const n=!(!a||l.wall.UserDetail.planId.includes("53"))||!!(d.uS&&l.wall.refere&&Object.keys(l.wall.refere).length>0),r=d.HY&&l.wall.User.referePageLink?l.wall.User.referePageLink:d.uS?l.wall.refere.referePageLink:(0,i.hZ)(t,l.wallID)[0],s=d.HY&&l.wall.User.referePage?l.wall.User.referePage:d.uS?l.wall.refere.referePage:(0,i.hZ)(t,l.wallID)[1];return n?(0,u.jsx)("a",{href:r,target:"_blank",style:{display:"none"},"aria-label":s,children:s}):null};class R extends t.Component{constructor(){super(...arguments),this.state={errorData:null,render:""},this.onLoadEditor=()=>{if(d.IU)try{window.addEventListener("message",this.handleMessage)}catch(e){console.log("error",e)}else window.location.href.includes("addfeedload=load")&&window.addEventListener("message",this.addFeedReloadTheme)},this.handleMessage=e=>{const{type:l,data:a}=e.data;if("reloadWebsite"==l){const e=JSON.parse(a);console.warn("payload 1",e),this.setState({render:(0,r.A)()});const{onUpdateEditor:l}=this.props;l(e)}},this.addFeedReloadTheme=e=>{const{type:l,data:a}=e.data;if("reloadTheme"==l){const{onUpdateEditor:e}=this.props;e(a)}}}componentWillMount(){d.aD&&(c().init(),a.e(7556).then(a.bind(a,67556)))}componentDidMount(){setTimeout(()=>L(),200),this.onLoadEditor()}componentDidUpdate(e,l){var a,t,n;let r=null===(a=e.appData.wall)||void 0===a||null===(t=a.Personalization)||void 0===t?void 0:t.demoWall;var s;(null===(n=e.appData.error)||void 0===n?void 0:n.themeError)!==l.errorData&&(this.setState({errorData:null===(s=e.appData.error)||void 0===s?void 0:s.themeError}),"function"===typeof window.onSetErrorCode&&null!==this.state.errorData&&window.onSetErrorCode(this.state.errorData,r))}componentWillUnmount(){d.IU?window.removeEventListener("message",this.handleMessage):window.location.href.includes("addfeedload=load")&&window.removeEventListener("message",this.addFeedReloadTheme)}render(){var e,l,a;const{appData:n,modalPop:r,spotlight:s}=this.props,{render:o}=this.state,h=!!(n&&n.wall&&Object.keys(n.wall).length>0&&n.wall.UserDetail&&Object.keys(n.wall.UserDetail).length>0),p=!(!d.aD||!s.status);return(0,u.jsx)(u.Fragment,{children:!d.aD||window.location.href.includes("onsite-upload")||1!=n.isStudio||i.dm||I||window.location.href.includes("editor=1")?(0,u.jsxs)(u.Fragment,{children:[d.Vn?null:(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(F,{})}),n&&n.wall&&Object.keys(n.wall).length>0&&!window.location.href.includes("onsite-upload")?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(j,{wall:n.wall})}):null,r.onSiteIsShowPopUp&&null!==n&&void 0!==n&&n.wall?(0,u.jsxs)(W,{children:["  ",(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",d.aD?(0,u.jsx)(P,{wall:null===n||void 0===n?void 0:n.wall,wallId:null===n||void 0===n||null===(e=n.wall)||void 0===e||null===(l=e.Wall)||void 0===l?void 0:l.id,feeds:null===n||void 0===n?void 0:n.feeds,isFreeAdsStatus:n.postData.isFreeAdsStatus}):(0,u.jsx)(g,{})," "]})," "]}):null,(0,t.createElement)(M,{...n,key:o,keyRender:o,spotlight:s}),h&&n.wall.UserDetail.planId.includes("53")&&!d.aD?(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[(0,u.jsx)(k,{appData:n})," "]}):null,null!==n&&void 0!==n&&null!==(a=n.postData)&&void 0!==a&&a.isFreeAdsStatus?(0,u.jsxs)(W,{children:[(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[(0,u.jsx)(S,{appData:n})," "]}),window.location.href.includes("editor=1")?"":(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[(0,u.jsx)(y,{appData:n})," "]})]}):null,!p&&r.isShowPopUp?d.HY&&(0,i.qs)()?(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(D,{wall:n.wall,data:r.data,languageSetting:n.languageSetting,networkData:n.networkData,postData:n.postData,brandingNetworks:""!=n.webFilters&&n.webFilters?n.webFilters.map(e=>{let{networkId:l}=e;return l}):null})})," "]}):(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(b,{wall:n.wall,isShowPopUp:r.isShowPopUp,data:r.data,languageSetting:n.languageSetting,networkData:n.networkData,postData:n.postData,brandingNetworks:""!=n.webFilters&&n.webFilters?n.webFilters.map(e=>{let{networkId:l}=e;return l}):null},r.isShowPopUp)})," "]}):null,d.aD&&!p&&n.announcements?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(U,{announcements:n.announcements})}):null,r.reportStatus&&d.yR?(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(f,{item:r.reportData,wall:n.wall})})," "]}):null,r.shareStatus&&d.yR?(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(x,{postLink:r.shareData.link,userName:r.shareData.author.name})})," "]}):null,n&&n.wall&&Object.keys(n.wall).length>0&&d.yR?(0,u.jsx)(W,{children:(0,u.jsx)(O,{appData:n})}):null,p?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(E,{itemData:s.data,wall:n.wall})}):null]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v,{wallID:n.wallID})})})}}const C=(0,s.Ng)(e=>({appData:e.appData,modalPop:e.modalPop,spotlight:e.spotlight}),e=>({onUpdateEditor:l=>e((0,h.qI)(l))}))(R)}}]);