"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[854],{20854:(e,a,l)=>{l.r(a),l.d(a,{addScript:()=>z,default:()=>C,isEditor:()=>I,onLoad:()=>L});var t=l(9950),n=l(73068),s=l(15255),r=l(11127),o=l(80415),i=l(52867),d=l(66345),h=l(14478),p=l(87988),c=l.n(p),u=l(44414);const w=t.lazy(()=>l.e(8689).then(l.bind(l,88689))),j=t.lazy(()=>l.e(5505).then(l.bind(l,25505))),m=t.lazy(()=>Promise.all([l.e(2772),l.e(4674)]).then(l.bind(l,84674))),g=t.lazy(()=>l.e(9468).then(l.bind(l,69468))),x=t.lazy(()=>l.e(2665).then(l.bind(l,92665))),b=t.lazy(()=>Promise.all([l.e(804),l.e(8615),l.e(8940),l.e(6197),l.e(3464),l.e(2433)]).then(l.bind(l,13147))),D=t.lazy(()=>Promise.all([l.e(804),l.e(8940),l.e(6197),l.e(8389),l.e(3464),l.e(4877)]).then(l.bind(l,64877))),f=t.lazy(()=>l.e(9563).then(l.bind(l,79563))),k=t.lazy(()=>l.e(495).then(l.bind(l,20495))),S=t.lazy(()=>l.e(5600).then(l.bind(l,5600))),y=t.lazy(()=>l.e(8813).then(l.bind(l,88813))),F=t.lazy(()=>l.e(2833).then(l.bind(l,82833))),v=t.lazy(()=>l.e(2902).then(l.bind(l,82902))),U=t.lazy(()=>l.e(5002).then(l.bind(l,85002))),P=t.lazy(()=>Promise.all([l.e(8092),l.e(804),l.e(8615),l.e(6002),l.e(8370)]).then(l.bind(l,66937))),E=t.lazy(()=>l.e(8768).then(l.bind(l,48768))),z=e=>{const a=document.createElement("script");a.src=e,a.defer=!0,document.head.appendChild(a)},I=!!window.isEditor,L=()=>{window.jQuery||z(`${o.M$}/js/jquery.min.js?ver=1`),z(`${o.M$}/js/slackdown.js?ver=1`)},M=e=>!e.loader||null==e.loader.loader||null!=e.error.errorWithMessage||e.error.planLimit&&!d.HY?!d.HY&&(e.error.errorWithMessage||e.error.planLimit||e.error.themeError)?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(j,{...e})}):null:(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(w,{...e})}),W=(0,n.componentWillAppendToBody)(e=>{let{children:a}=e;return a}),O=e=>{let{appData:a}=e;const l=!!(a.wall.UserDetail&&Object.keys(a.wall.UserDetail).length>0);let t=""!=a.webFilters&&a.webFilters?a.webFilters.map(e=>{let{networkId:a}=e;return a}):null;const n=!(!l||a.wall.UserDetail.planId.includes("53"))||!!(d.uS&&a.wall.refere&&Object.keys(a.wall.refere).length>0),s=d.HY&&a.wall.User.referePageLink?a.wall.User.referePageLink:d.uS?a.wall.refere.referePageLink:(0,i.hZ)(t,a.wallID)[0],r=d.HY&&a.wall.User.referePage?a.wall.User.referePage:d.uS?a.wall.refere.referePage:(0,i.hZ)(t,a.wallID)[1];return n?(0,u.jsx)("a",{href:s,target:"_blank",style:{display:"none"},"aria-label":r,children:r}):null};class R extends t.Component{constructor(){super(...arguments),this.state={errorData:null,render:""},this.onLoadEditor=()=>{if(d.IU)try{window.addEventListener("message",this.handleMessage)}catch(e){console.log("error",e)}else window.location.href.includes("addfeedload=load")&&window.addEventListener("message",this.addFeedReloadTheme)},this.handleMessage=e=>{const{type:a,data:l}=e.data;if("reloadWebsite"==a){const e=JSON.parse(l);console.warn("payload 1",e),this.setState({render:(0,s.A)()});const{onUpdateEditor:a}=this.props;a(e)}},this.addFeedReloadTheme=e=>{const{type:a,data:l}=e.data;if("reloadTheme"==a){const{onUpdateEditor:e}=this.props;e(l)}}}componentWillMount(){d.aD&&(c().init(),l.e(7556).then(l.bind(l,67556)))}componentDidMount(){setTimeout(()=>L(),200),this.onLoadEditor()}componentDidUpdate(e,a){var l,t,n;let s=null===(l=e.appData.wall)||void 0===l||null===(t=l.Personalization)||void 0===t?void 0:t.demoWall;var r;(null===(n=e.appData.error)||void 0===n?void 0:n.themeError)!==a.errorData&&(this.setState({errorData:null===(r=e.appData.error)||void 0===r?void 0:r.themeError}),"function"===typeof window.onSetErrorCode&&null!==this.state.errorData&&window.onSetErrorCode(this.state.errorData,s))}componentWillUnmount(){d.IU?window.removeEventListener("message",this.handleMessage):window.location.href.includes("addfeedload=load")&&window.removeEventListener("message",this.addFeedReloadTheme)}render(){var e,a,l;const{appData:n,modalPop:s,spotlight:r}=this.props,{render:o}=this.state,h=!!(n&&n.wall&&Object.keys(n.wall).length>0&&n.wall.UserDetail&&Object.keys(n.wall.UserDetail).length>0),p=!(!d.aD||!r.status);return(0,u.jsx)(u.Fragment,{children:!d.aD||window.location.href.includes("onsite-upload")||1!=n.isStudio||i.dm||I||window.location.href.includes("editor=1")?(0,u.jsxs)(u.Fragment,{children:[d.Vn?null:(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(v,{})}),n&&n.wall&&Object.keys(n.wall).length>0&&!window.location.href.includes("onsite-upload")?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(m,{wall:n.wall})}):null,s.onSiteIsShowPopUp&&null!==n&&void 0!==n&&n.wall?(0,u.jsxs)(W,{children:["  ",(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",d.aD?(0,u.jsx)(E,{wall:null===n||void 0===n?void 0:n.wall,wallId:null===n||void 0===n||null===(e=n.wall)||void 0===e||null===(a=e.Wall)||void 0===a?void 0:a.id,feeds:null===n||void 0===n?void 0:n.feeds,isFreeAdsStatus:n.postData.isFreeAdsStatus}):(0,u.jsx)(g,{})," "]})," "]}):null,(0,t.createElement)(M,{...n,key:o,keyRender:o,spotlight:r}),h&&n.wall.UserDetail.planId.includes("53")&&!d.aD?(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[(0,u.jsx)(k,{appData:n})," "]}):null,null!==n&&void 0!==n&&null!==(l=n.postData)&&void 0!==l&&l.isFreeAdsStatus?(0,u.jsxs)(W,{children:[(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[(0,u.jsx)(S,{appData:n})," "]}),window.location.href.includes("editor=1")?"":(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[(0,u.jsx)(y,{appData:n})," "]})]}):null,!p&&s.isShowPopUp?d.HY&&(0,i.qs)()?(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(D,{wall:n.wall,data:s.data,languageSetting:n.languageSetting,networkData:n.networkData,postData:n.postData,brandingNetworks:""!=n.webFilters&&n.webFilters?n.webFilters.map(e=>{let{networkId:a}=e;return a}):null})})," "]}):(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(b,{wall:n.wall,isShowPopUp:s.isShowPopUp,data:s.data,languageSetting:n.languageSetting,networkData:n.networkData,postData:n.postData,brandingNetworks:""!=n.webFilters&&n.webFilters?n.webFilters.map(e=>{let{networkId:a}=e;return a}):null},s.isShowPopUp)})," "]}):null,d.aD&&!p&&n.announcements?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(U,{announcements:n.announcements})}):null,s.reportStatus&&d.yR?(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(f,{item:s.reportData,wall:n.wall})})," "]}):null,s.shareStatus&&d.yR?(0,u.jsxs)(W,{children:[" ",(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(x,{postLink:s.shareData.link,userName:s.shareData.author.name})})," "]}):null,n&&n.wall&&Object.keys(n.wall).length>0&&d.yR?(0,u.jsx)(W,{children:(0,u.jsx)(O,{appData:n})}):null,p?(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(P,{itemData:r.data,wall:n.wall})}):null]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(F,{wallID:n.wallID})})})}}const C=(0,r.Ng)(e=>({appData:e.appData,modalPop:e.modalPop,spotlight:e.spotlight}),e=>({onUpdateEditor:a=>e((0,h.qI)(a))}))(R)}}]);