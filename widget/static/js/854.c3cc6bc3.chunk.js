"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[854],{20854:(e,l,a)=>{a.r(l),a.d(l,{addScript:()=>z,default:()=>R,isEditor:()=>I,onLoad:()=>L});var t=a(9950),n=a(73068),s=a(15255),r=a(11127),o=a(80415),i=a(52867),d=a(66345),h=a(14478),u=a(87988),p=a.n(u),c=a(44414);const w=t.lazy(()=>a.e(8689).then(a.bind(a,88689))),m=t.lazy(()=>a.e(5505).then(a.bind(a,25505))),j=t.lazy(()=>Promise.all([a.e(2772),a.e(4674)]).then(a.bind(a,84674))),g=t.lazy(()=>a.e(9468).then(a.bind(a,69468))),b=t.lazy(()=>Promise.all([a.e(9540),a.e(8768),a.e(411)]).then(a.bind(a,56214))),x=t.lazy(()=>a.e(2665).then(a.bind(a,92665))),D=t.lazy(()=>Promise.all([a.e(804),a.e(8615),a.e(8940),a.e(6197),a.e(3464),a.e(2433)]).then(a.bind(a,13147))),f=t.lazy(()=>Promise.all([a.e(804),a.e(8940),a.e(6197),a.e(8389),a.e(3464),a.e(4877)]).then(a.bind(a,64877))),k=t.lazy(()=>a.e(9563).then(a.bind(a,79563))),S=t.lazy(()=>a.e(495).then(a.bind(a,20495))),v=t.lazy(()=>a.e(5600).then(a.bind(a,5600))),y=t.lazy(()=>a.e(8813).then(a.bind(a,88813))),F=t.lazy(()=>a.e(2833).then(a.bind(a,82833))),P=t.lazy(()=>a.e(2902).then(a.bind(a,82902))),U=t.lazy(()=>a.e(5002).then(a.bind(a,85002))),E=t.lazy(()=>Promise.all([a.e(8092),a.e(804),a.e(8615),a.e(6002),a.e(8370)]).then(a.bind(a,66937))),z=e=>{const l=document.createElement("script");l.src=e,l.defer=!0,document.head.appendChild(l)},I=!!window.isEditor,L=()=>{window.jQuery||z(`${o.M$}/js/jquery.min.js?ver=1`),z(`${o.M$}/js/slackdown.js?ver=1`)},M=e=>{var l;return e.loader&&null!=e.loader.loader&&null==e.error.errorWithMessage&&(!e.error.planLimit||d.HY)&&(null==e.error.themeError||Object.keys(e.error.themeError).length>0&&0==e.error.themeError.error_code||1===(null===(l=e.wall)||void 0===l?void 0:l.Personalization.demoWall))?(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(w,{...e})}):!d.HY&&(e.error.errorWithMessage||e.error.planLimit||e.error.themeError)?(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(m,{...e})}):null},W=(0,n.componentWillAppendToBody)(e=>{let{children:l}=e;return l}),_=e=>{let{appData:l}=e;const a=!!(l.wall.UserDetail&&Object.keys(l.wall.UserDetail).length>0);let t=""!=l.webFilters&&l.webFilters?l.webFilters.map(e=>{let{networkId:l}=e;return l}):null;const n=!(!a||l.wall.UserDetail.planId.includes("53"))||!!(d.uS&&l.wall.refere&&Object.keys(l.wall.refere).length>0),s=d.HY&&l.wall.User.referePageLink?l.wall.User.referePageLink:d.uS?l.wall.refere.referePageLink:(0,i.hZ)(t,l.wallID)[0],r=d.HY&&l.wall.User.referePage?l.wall.User.referePage:d.uS?l.wall.refere.referePage:(0,i.hZ)(t,l.wallID)[1];return n?(0,c.jsx)("a",{href:s,target:"_blank",style:{display:"none"},"aria-label":r,children:r}):null};class O extends t.Component{constructor(){super(...arguments),this.state={errorData:null,render:""},this.onLoadEditor=()=>{if(d.IU)try{window.addEventListener("message",this.handleMessage)}catch(e){console.log("error",e)}else window.location.href.includes("addfeedload=load")&&window.addEventListener("message",this.addFeedReloadTheme)},this.handleMessage=e=>{const{type:l,data:a}=e.data;if("reloadWebsite"==l){const e=JSON.parse(a);console.warn("payload 1",e),this.setState({render:(0,s.A)()});const{onUpdateEditor:l}=this.props;l(e)}},this.addFeedReloadTheme=e=>{const{type:l,data:a}=e.data;if("reloadTheme"==l){const{onUpdateEditor:e}=this.props;e(a)}}}componentWillMount(){d.aD&&(p().init(),a.e(7556).then(a.bind(a,67556)))}componentDidMount(){setTimeout(()=>L(),200),this.onLoadEditor()}componentDidUpdate(e,l){var a,t,n;let s=null===(a=e.appData.wall)||void 0===a||null===(t=a.Personalization)||void 0===t?void 0:t.demoWall;var r;(null===(n=e.appData.error)||void 0===n?void 0:n.themeError)!==l.errorData&&(this.setState({errorData:null===(r=e.appData.error)||void 0===r?void 0:r.themeError}),"function"===typeof window.onSetErrorCode&&null!==this.state.errorData&&window.onSetErrorCode(this.state.errorData,s))}componentWillUnmount(){d.IU?window.removeEventListener("message",this.handleMessage):window.location.href.includes("addfeedload=load")&&window.removeEventListener("message",this.addFeedReloadTheme)}render(){var e,l,a,n,s,r,o,h,u;const{appData:p,modalPop:w,spotlight:m}=this.props,{render:z}=this.state,L=!!(p&&p.wall&&Object.keys(p.wall).length>0&&p.wall.UserDetail&&Object.keys(p.wall.UserDetail).length>0),O=!(!d.aD||!m.status),R=null!==(e=p.wall)&&void 0!==e&&null!==(l=e.UgcSettings)&&void 0!==l&&l.onsite_status&&null!==(a=p.wall)&&void 0!==a&&null!==(n=a.PhotoBoothSettings)&&void 0!==n&&n.photo_booth_status?1:null!==(s=p.wall)&&void 0!==s&&null!==(r=s.PhotoBoothSettings)&&void 0!==r&&r.photo_booth_status?3:2;return(0,c.jsx)(c.Fragment,{children:!d.aD||window.location.href.includes("onsite-upload")||1!=p.isStudio||i.dm||I||window.location.href.includes("editor=1")?(0,c.jsxs)(c.Fragment,{children:[d.Vn?null:(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(P,{})}),p&&p.wall&&Object.keys(p.wall).length>0&&!window.location.href.includes("onsite-upload")?(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(j,{wall:p.wall})}):null,w.onSiteIsShowPopUp&&null!==p&&void 0!==p&&p.wall?(0,c.jsxs)(W,{children:["  ",(0,c.jsxs)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",d.aD&&2!=R?(0,c.jsx)(b,{wall:null===p||void 0===p?void 0:p.wall,wallId:null===p||void 0===p||null===(o=p.wall)||void 0===o||null===(h=o.Wall)||void 0===h?void 0:h.id,feeds:null===p||void 0===p?void 0:p.feeds,isFreeAdsStatus:p.postData.isFreeAdsStatus,snapType:R}):(0,c.jsx)(g,{})," "]})," "]}):null,(0,t.createElement)(M,{...p,key:z,keyRender:z,spotlight:m}),L&&p.wall.UserDetail.planId.includes("53")&&!d.aD?(0,c.jsxs)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(S,{appData:p})," "]}):null,null!==p&&void 0!==p&&null!==(u=p.postData)&&void 0!==u&&u.isFreeAdsStatus?(0,c.jsxs)(W,{children:[(0,c.jsxs)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(v,{appData:p})," "]}),window.location.href.includes("editor=1")?"":(0,c.jsxs)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(y,{appData:p})," "]})]}):null,!O&&w.isShowPopUp?d.HY&&(0,i.qs)()?(0,c.jsxs)(W,{children:[" ",(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(f,{wall:p.wall,data:w.data,languageSetting:p.languageSetting,networkData:p.networkData,postData:p.postData,brandingNetworks:""!=p.webFilters&&p.webFilters?p.webFilters.map(e=>{let{networkId:l}=e;return l}):null})})," "]}):(0,c.jsxs)(W,{children:[" ",(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(D,{wall:p.wall,isShowPopUp:w.isShowPopUp,data:w.data,languageSetting:p.languageSetting,networkData:p.networkData,postData:p.postData,brandingNetworks:""!=p.webFilters&&p.webFilters?p.webFilters.map(e=>{let{networkId:l}=e;return l}):null},w.isShowPopUp)})," "]}):null,d.aD&&!O&&p.announcements?(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(U,{announcements:p.announcements})}):null,w.reportStatus&&d.yR?(0,c.jsxs)(W,{children:[" ",(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(k,{item:w.reportData,wall:p.wall})})," "]}):null,w.shareStatus&&d.yR?(0,c.jsxs)(W,{children:[" ",(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(x,{postLink:w.shareData.link,userName:w.shareData.author.name})})," "]}):null,p&&p.wall&&Object.keys(p.wall).length>0&&d.yR?(0,c.jsx)(W,{children:(0,c.jsx)(_,{appData:p})}):null,O?(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(E,{itemData:m.data,wall:p.wall})}):null]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(F,{wallID:p.wallID})})})}}const R=(0,r.Ng)(e=>({appData:e.appData,modalPop:e.modalPop,spotlight:e.spotlight}),e=>({onUpdateEditor:l=>e((0,h.qI)(l))}))(O)}}]);