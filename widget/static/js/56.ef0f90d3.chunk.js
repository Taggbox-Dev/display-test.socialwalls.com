"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[56],{70056:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var n=t(9950),l=t(10300),o=t(80415),s=t(52867),i=t(66345),r=t(76506),d=t(93152),h=t(21850),c=t(82652),p=t(44414);const u=n.lazy((()=>t.e(8947).then(t.bind(t,8947)))),m=n.lazy((()=>t.e(980).then(t.bind(t,10980)))),x=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(1503),t.e(4378),t.e(6644),t.e(8731)]).then(t.bind(t,92367)))),g=n.lazy((()=>Promise.all([t.e(8092),t.e(1503),t.e(4378),t.e(6644),t.e(6256)]).then(t.bind(t,39232)))),w=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3382)]).then(t.bind(t,53382)))),b=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(4061)]).then(t.bind(t,84061)))),v=n.lazy((()=>Promise.all([t.e(8740),t.e(1503),t.e(4378),t.e(3763)]).then(t.bind(t,25816)))),j=n.lazy((()=>Promise.all([t.e(3556),t.e(4927)]).then(t.bind(t,54927)))),f=n.lazy((()=>Promise.all([t.e(8092),t.e(1588)]).then(t.bind(t,1588)))),S=n.lazy((()=>Promise.all([t.e(8092),t.e(8885),t.e(497),t.e(3131),t.e(9853)]).then(t.bind(t,13778)))),y=n.lazy((()=>Promise.all([t.e(8092),t.e(8885),t.e(497),t.e(3131),t.e(520)]).then(t.bind(t,17135)))),D=n.lazy((()=>Promise.all([t.e(8092),t.e(3556),t.e(566)]).then(t.bind(t,50566)))),P=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3556),t.e(2508)]).then(t.bind(t,2508)))),I=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3556),t.e(6644),t.e(7541)]).then(t.bind(t,49769)))),T=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3956),t.e(8062)]).then(t.bind(t,45695)))),k=n.lazy((()=>Promise.all([t.e(8092),t.e(3956),t.e(4332)]).then(t.bind(t,67433)))),F=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3956),t.e(7415)]).then(t.bind(t,50688)))),z=n.lazy((()=>Promise.all([t.e(8092),t.e(3956),t.e(8728)]).then(t.bind(t,50741)))),M=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3956),t.e(7684)]).then(t.bind(t,913)))),U=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3956),t.e(82)]).then(t.bind(t,60403)))),C=n.lazy((()=>t.e(4155).then(t.bind(t,34155)))),H=n.lazy((()=>Promise.all([t.e(3556),t.e(1906)]).then(t.bind(t,41906)))),B=n.lazy((()=>Promise.all([t.e(8092),t.e(3956),t.e(9145)]).then(t.bind(t,45198)))),L=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3556),t.e(5883)]).then(t.bind(t,75883)))),_=n.lazy((()=>Promise.all([t.e(8092),t.e(3556),t.e(7059)]).then(t.bind(t,87059)))),$=n.lazy((()=>Promise.all([t.e(8092),t.e(8885),t.e(497),t.e(9201)]).then(t.bind(t,49201)))),E=n.lazy((()=>t.e(3758).then(t.bind(t,3758)))),Y=n.lazy((()=>Promise.all([t.e(8092),t.e(8740),t.e(3556),t.e(3356)]).then(t.bind(t,33356)))),A=n.lazy((()=>Promise.all([t.e(8740),t.e(3883)]).then(t.bind(t,73883)))),N=n.lazy((()=>Promise.all([t.e(8740),t.e(8885),t.e(497),t.e(1503),t.e(4378),t.e(5104)]).then(t.bind(t,8568)))),W=i.HY?o.hX:o.Fp,R=i.HY?o.Fc:i.Vn?o.gc:o.xX,V=n.memo((e=>{let{loadBranding:a,cardHeight:t,renderId:l,wall:o,reviewFilters:s,webFilters:r,postData:d,clickToShowPopUp:h,onClickToCTA:c,postSizeInPx:u,onClickPopUpSlider:m,parentID:E,keyRender:W,containerSize:R,heightUpdate:V}=e;const q=!d.hasMoreData[0]||0!=d.hasMoreData[0].hasMoreData&&(!d.hasMoreData[d.appendData.networkID]||d.hasMoreData[d.appendData.networkID].hasMoreData),{CardStyle:O,ThemeStyle:X,ProductSetting:G,ThemeInfo:K,SnapUp:Q}=o,J={...d,cardHeight:t,loadBranding:a,heightUpdate:V,reviewFilters:s,webFilters:r,hasMoreData:q,clickToShowPopUp:h,onClickToCTA:c,onClickPopUpSlider:m,keyRender:W,containerSize:R,heightUpdate:V,postSizeInPx:u,parentID:E,renderId:l,CardStyle:O,ThemeStyle:X,ProductSetting:G,ThemeInfo:K,SnapUp:Q};switch(null===K||void 0===K?void 0:K.id){case 3:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(g,{...J})});case 4:return(0,p.jsxs)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:[(0,p.jsx)(w,{...J})," "]});case 19:case 59:case 83:return(0,p.jsxs)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:[(0,p.jsx)(x,{...J})," "]});case 50:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:i.HY?(0,p.jsx)(j,{...J}):(0,p.jsx)(v,{...J})});case 16:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(P,{...J})});case 55:case 81:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(D,{...J})});case 49:case 53:case 85:return(0,p.jsxs)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:[" ",i.HY?(0,p.jsx)(f,{...J}):(0,p.jsx)(b,{...J})]});case 47:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(I,{...J})});case 6:case 61:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(S,{...J})});case 62:return(0,p.jsxs)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:[" ",i.HY?(0,p.jsx)(y,{...J}):i.aD?(0,p.jsx)(T,{...J}):""," "]});case 63:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:i.aD?(0,p.jsx)(k,{...J}):i.HY?(0,p.jsx)(N,{...J}):""});case 64:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(F,{...J})});case 65:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(z,{...J})});case 78:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(M,{...J})});case 66:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(U,{...J})});case 67:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(C,{...J})});case 68:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(H,{...J})});case 69:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(B,{...J})});case 74:case 76:case 77:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(Y,{...J})});case 70:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(L,{...J})});case 71:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:i.Vn?(0,p.jsx)(P,{...J}):(0,p.jsx)(_,{...J})});case 73:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)($,{...J})});case 64:return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(A,{...J})});default:return(0,p.jsx)(p.Fragment,{})}}));class q extends n.PureComponent{constructor(e){super(e),this.loadBranding=()=>this.setState({isBranding:!0}),this.autoLoadEditorScrollData=e=>{var a;const{wall:t,postData:n,loaderData:l,hasMoreData:o}=this.props,s=t.ThemeStyle.totalPosts;let r=document.getElementsByClassName("wall-editor");if(1==t.ThemeStyle.autoScrollStatus&&W.includes(null===t||void 0===t||null===(a=t.ThemeInfo)||void 0===a?void 0:a.id)&&r.length>0&&o){let e=r[0];if(document.body.scrollHeight+e.scrollTop>=e.scrollHeight-10&&(!l||!l.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(i.HY?t.ThemeInfo.webId:t.ThemeInfo.wallId,e,s,n.appendData.networkID,n.appendData.after,n.appendData.heightEvent)}}},this.autoLoadScrollData=e=>{var a;const{wall:t,postData:n,loaderData:l,hasMoreData:o}=this.props,{ThemeInfo:s,ThemeStyle:r}=t,d=null===r||void 0===r?void 0:r.totalPosts,h=null===this||void 0===this||null===(a=this.containerRef)||void 0===a?void 0:a.current;if(h&&1===r.autoScrollStatus&&o){const e=h.getBoundingClientRect(),a=window.innerHeight;if(e.bottom-150<=a&&W.includes(null===s||void 0===s?void 0:s.id)&&(!l||!l.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(i.HY?s.webId:null===s||void 0===s?void 0:s.wallId,e,d,n.appendData.networkID,n.appendData.after,null===n||void 0===n?void 0:n.appendData.heightEvent)}}},this.onClickToShowPopup=(e,a)=>t=>{t.stopPropagation(),this.onLoadPopUp(e,a)},this.onClickPopUpSlider=(e,a)=>this.onLoadPopUp(e,a),this.onLoadPopUp=(e,a)=>{const{wall:t,postData:n,languageSetting:l,showPopUP:o}=this.props,{ThemeInfo:d,ThemeStyle:c}=t||{},{modal:p}=c||{},u=null===d||void 0===d?void 0:d.ownerId,m=i.HY?null===d||void 0===d?void 0:d.webId:null===d||void 0===d?void 0:d.wallId,x=null===a||void 0===a?void 0:a.link,g=(0,s.qs)(),w=x&&"undefined"!==x;if(!i.MH&&!i.HY&&g&&!(null!==p&&void 0!==p&&p.mobile)||i.MH&&(null===p||void 0===p?void 0:p.mobile)&&w)return void(w&&window.open(x,"_blank"));const b=n.postData.map((e=>n.completeDataObject[e])).filter((e=>!String(e.id).includes("free_add_"))),v=(0,r.p5)(b,a.id,e),j=null===p||void 0===p?void 0:p.action;if(2==j&&w)return window.open(x,"_blank");if(3==j)return window.open(null===p||void 0===p?void 0:p.redirect,"_blank");1!=j&&void 0!==j||o({type:"post",card:a,idArray:b,index:v,viewOnText:l.viewOn,shareText:l.share,imgData:s.Y0,wall:t});const f=a.referenceId||a.id,S={action:2,wall:m,feed:a.feedId,post:f,type:3,owner:u};(0,h.hq)((i.Qy,S)),(0,h.x9)("Tagbox","popupclick_","popup",x)},this.loadPopUpWithTimer=()=>{const{currentIndex:e}=this.state,{postData:{postData:a,completeDataObject:t},wall:n}=this.props,l=0==n.ThemeStyle.modal.duration?5e3:1e3*n.ThemeStyle.modal.duration;let o=e+1;if(o>=a.length&&(o=0),!isNaN(o)&&a.length>0){const e=a.map((e=>t[e]));this.setState({currentIndex:o}),this.togglePopUpVisibility(o,e[o],l)}},this.togglePopUpVisibility=(e,a,t)=>{this.onLoadPopUp(e,a),setTimeout((()=>{this.props.closePopUP(),setTimeout((()=>{this.loadPopUpWithTimer()}),t)}),t)},this.onClickToCTA=e=>{var a,t;const{wall:n}=this.props;(0,h.hq)({action:2,wall:n.ThemeInfo.wallId,type:1,feed:e.feedId,post:null!==(a=e.referenceId)&&void 0!==a?a:e.id,owner:n.ThemeInfo.ownerId}),(0,h.x9)("Tagbox","ctaClick","cta",(null===(t=e.cta)||void 0===t?void 0:t.url)||"")},this.state={isLoaded:!1,currentIndex:-1,startPos:{x:0,y:0},isBranding:!1,isScrollPaused:!0},this.containerRef=n.createRef()}componentDidMount(){var e;const{ThemeStyle:a}=this.props.wall;if(i.aD&&!i.Vn&&!s.GF){const e=0==a.modal.duration?5e3:1e3*a.modal.duration;1==a.modal.action&&setTimeout((()=>this.loadPopUpWithTimer()),e)}window.editor?null===(e=document.querySelector(".wall-editor"))||void 0===e||e.addEventListener("scroll",this.autoLoadEditorScrollData):window.addEventListener&&window.addEventListener("scroll",this.autoLoadScrollData),setTimeout((()=>{this.setState({isLoaded:!0})}),2e3),i.HY&&!i.I2&&(0,r.pj)()}render(){var e,a,t,l,o,s,r,d;const{wall:h,postData:x,containerSize:g,brandingNetworks:w,CusBannerHeight:b}=this.props,{Ticker:v,Banner:j}=h,{isLoaded:f,isBranding:S}=this.state,y=null===x||void 0===x||null===(e=x.postData)||void 0===e?void 0:e.length,D=(null===h||void 0===h||null===(a=h.ThemeInfo)||void 0===a?void 0:a.branding)&&y&&S,P=!!(f&&1===(null===h||void 0===h||null===(t=h.ThemeStyle)||void 0===t?void 0:t.loadMoreStatus)&&R.includes(null===h||void 0===h||null===(l=h.ThemeInfo)||void 0===l?void 0:l.id)&&S&&y),I={height:i.aD&&!i.Vn?`calc(100vh - ${b}px - ${null!==j&&void 0!==j&&j.status?null===j||void 0===j?void 0:j.height:0}px - ${null!==v&&void 0!==v&&v.status?null===v||void 0===v?void 0:v.height:0}px)`:null};return(0,p.jsxs)("div",{className:"tb_theme_container "+(i.aD&&!i.Vn?"tb_wall_container":""),ref:this.containerRef,style:I,children:[D&&i.MH?(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(m,{wall:h,containerSize:g,brandingNetworks:w,wallId:h.ThemeInfo.wallId,themeID:null===h||void 0===h||null===(o=h.ThemeInfo)||void 0===o?void 0:o.id,user:h.User.userDatabaseType})}):null,(0,p.jsx)(V,{...this.props,...this.state,loadBranding:this.loadBranding,clickToShowPopUp:this.onClickToShowPopup,onClickToCTA:this.onClickToCTA,onClickPopUpSlider:this.onClickPopUpSlider,onLoadPopUp:this.onLoadPopUp,...i.aD&&{heightUpdate:this.heightUpdate,key:y}}),D&&!i.MH?(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(m,{wall:h,containerSize:g,brandingNetworks:w,wallId:h.ThemeInfo.wallId,themeID:null===h||void 0===h||null===(s=h.ThemeInfo)||void 0===s?void 0:s.id})}):null,P?(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(u,{ThemeStyle:h.ThemeStyle,ThemeInfo:h.ThemeInfo,postData:x})}):null,i.aD&&null!==h&&void 0!==h&&null!==(r=h.ThemeStyle)&&void 0!==r&&r.interactive&&!i.Vn?(0,p.jsx)(c.A,{wallId:null===h||void 0===h||null===(d=h.ThemeInfo)||void 0===d?void 0:d.wallId,children:(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(p.Fragment,{}),children:(0,p.jsx)(E,{})})}):null]})}}const O=(0,l.Ng)((e=>{var a,t,n;const{hasMoreData:l=[],appendData:o}=null===e||void 0===e||null===(a=e.appData)||void 0===a?void 0:a.postData,s=l[o.networkID],i=!1!==(null===(t=l[0])||void 0===t?void 0:t.hasMoreData)&&(null===(n=null===s||void 0===s?void 0:s.hasMoreData)||void 0===n||n);return{loaderData:e.loaderData,renderId:e.renderId,hasMoreData:i}}),(e=>({showPopUP:a=>e((0,d.Gd)(a)),nextData:(a,t,n,l,o,s,i)=>e((0,h.wF)(a,t,n,l,o,s,i)),closePopUP:()=>e((0,d.ng)())})))(q)},76506:(e,a,t)=>{t.d(a,{C9:()=>x,Cq:()=>m,HI:()=>p,Ph:()=>j,TW:()=>y,Uy:()=>h,fF:()=>g,hZ:()=>w,hz:()=>u,p5:()=>f,pj:()=>S,sl:()=>v,um:()=>c,wG:()=>b});var n=t(66345),l=t(80415),o=t(296),s=t(86961);let i=[],r=!1;const d=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${n.$x}`,Productdomain:n.QR}),h=e=>{var a;return null===(a=document.getElementById("tb_onsite_btn_id"))||void 0===a?void 0:a.classList.toggle("tb_onsite_btn_disabled",1===e)},c=e=>{var a;if(n.aD)return window.parent.postMessage(e,"*");const t={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")};null===(a=t[e])||void 0===a||a.call(t)},p=e=>{try{i.push(e)}catch(a){console.log(a)}},u=e=>e&&""!==e&&!e.includes("ui-avatars"),m=e=>{if(!e)return"0 Byte";const a=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,a),2),sizeText:["Bytes","KB","MB","GB","TB"][a]}},x=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,g=e=>{const a=Date.now()-1e3*e;if(a<6e4)return"just now";const t=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{let{ms:t}=e;return a>=t})),n=Math.floor(a/t.ms);return`${n} ${t.label}${n>1?"s":""} ago`},w=()=>[`${l.om}`,"Website Widget"],b=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",v=(["localhost","widget","wall_id="].every((e=>(0,n.vq)(e)))||(n.MH||[`${n.Xg}.${n.IF}`,`${n.Xg}${n.t6}${n.IF}`,`${n.Xg}s.${n.IF}`].some((e=>(0,n.vq)(e)))||n.HY),e=>{const a=Math.floor(Math.log10(e)/3)||0;return a?+(e/Math.pow(1e3,a)).toFixed(0)+["","K","M","B","T"][a]:e}),j=e=>n.MH?e:atob(e),f=(e,a,t)=>e&&e.length>0?e.findIndex((e=>e.id===a)):t,S=()=>{try{const{wall:e}=o.A.getState().appData,{webId:a,wallId:t,ownerId:l}=e.ThemeInfo;r||(window.addEventListener("beforeunload",(()=>{if(0===i.length)return;const e=i.reduce(((e,a)=>e+a),0);e>0?fetch(n.KQ,{method:"POST",headers:d,body:JSON.stringify({action:1,model:null!==s.Ex&&void 0!==s.Ex&&s.Ex.includes("website")?"website":"wall",playCount:i.length,wall:n.HY?a:t,playTime:e,owner:l}),keepalive:!0}).finally((()=>(i=[],r=!1))):(i=[],r=!1)})),r=!0)}catch(e){console.error(e)}},y=e=>new Promise(((a,t)=>Object.assign(new Image,{onload:function(){a({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>t(new Error(`Image loading error: ${e.message}`)),src:e})))}}]);