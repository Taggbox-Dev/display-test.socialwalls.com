"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[5400],{55400:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var s=i(9950),a=i(76506),n=i(44414);class o extends s.PureComponent{constructor(e){super(e),this.state={height:8,width:100,headerHeight:0},this.headerRef=s.createRef(),this.updateHeaderHeight=this.updateHeaderHeight.bind(this),this.timeoutId=null}updateHeaderHeight(){var e;if(null!==this&&void 0!==this&&null!==(e=this.headerRef)&&void 0!==e&&e.current){const e=this.headerRef.current.offsetHeight;this.props.updateHeaderHeight(e),this.setState({headerHeight:e})}}async initializeImageDimensions(){const{CustomBanner:e}=this.props;if(null!==e&&void 0!==e&&e.height&&null!==e&&void 0!==e&&e.width)this.setState({height:e.height,width:e.width});else if(null!==e&&void 0!==e&&e.url)try{const{width:t,height:i}=await(0,a.TW)(e.url);this.setState({height:i,width:t})}catch(t){console.error("Error loading image dimensions:",t)}}async componentDidMount(){await this.initializeImageDimensions(),this.timeoutId=setTimeout(this.updateHeaderHeight,1e3),window.addEventListener("resize",this.updateHeaderHeight)}componentWillUnmount(){window.removeEventListener("resize",this.updateHeaderHeight),this.timeoutId&&clearTimeout(this.timeoutId)}render(){const{CustomBanner:e}=this.props,{height:t,width:i,headerHeight:s}=this.state,a={paddingBottom:100*t/i+"%"},o={backgroundImage:`url(${null===e||void 0===e?void 0:e.url})`,...a};return(0,n.jsx)("div",{className:"tb_wall_custom_header_wrap__","data-height":s,ref:this.headerRef,children:(0,n.jsx)("div",{className:"tb_header_img_",style:o,children:(0,n.jsx)("div",{})})})}}},76506:(e,t,i)=>{i.d(t,{C9:()=>w,Cq:()=>m,HI:()=>c,Ph:()=>H,TW:()=>_,Uy:()=>l,fF:()=>p,hZ:()=>f,hz:()=>g,p5:()=>y,pj:()=>I,sl:()=>v,um:()=>u,wG:()=>b});var s=i(66345),a=i(80415),n=i(296),o=i(86961);let r=[],d=!1;const h=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${s.$x}`,Productdomain:s.QR}),l=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},u=e=>{var t;if(s.aD)return window.parent.postMessage(e,"*");const i={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")};null===(t=i[e])||void 0===t||t.call(i)},c=e=>{try{r.push(e)}catch(t){console.log(t)}},g=e=>e&&""!==e&&!e.includes("ui-avatars"),m=e=>{if(!e)return"0 Byte";const t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},w=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,p=e=>{const t=Date.now()-1e3*e;if(t<6e4)return"just now";const i=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{let{ms:i}=e;return t>=i})),s=Math.floor(t/i.ms);return`${s} ${i.label}${s>1?"s":""} ago`},f=()=>[`${a.om}`,"Website Widget"],b=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",v=(["localhost","widget","wall_id="].every((e=>(0,s.vq)(e)))||(s.MH||[`${s.Xg}.${s.IF}`,`${s.Xg}${s.t6}${s.IF}`,`${s.Xg}s.${s.IF}`].some((e=>(0,s.vq)(e)))||s.HY),e=>{const t=Math.floor(Math.log10(e)/3)||0;return t?+(e/Math.pow(1e3,t)).toFixed(0)+["","K","M","B","T"][t]:e}),H=e=>s.MH?e:atob(e),y=(e,t,i)=>e&&e.length>0?e.findIndex((e=>e.id===t)):i,I=()=>{try{const{wall:e}=n.A.getState().appData,{webId:t,wallId:i,ownerId:a}=e.ThemeInfo;d||(window.addEventListener("beforeunload",(()=>{if(0===r.length)return;const e=r.reduce(((e,t)=>e+t),0);e>0?fetch(s.KQ,{method:"POST",headers:h,body:JSON.stringify({action:1,model:null!==o.Ex&&void 0!==o.Ex&&o.Ex.includes("website")?"website":"wall",playCount:r.length,wall:s.HY?t:i,playTime:e,owner:a}),keepalive:!0}).finally((()=>(r=[],d=!1))):(r=[],d=!1)})),d=!0)}catch(e){console.error(e)}},_=e=>new Promise(((t,i)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>i(new Error(`Image loading error: ${e.message}`)),src:e})))}}]);