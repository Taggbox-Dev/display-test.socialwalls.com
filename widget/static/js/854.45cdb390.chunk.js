"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[854],{20854:(e,l,a)=>{a.r(l),a.d(l,{addScript:()=>z,default:()=>A,isEditor:()=>I,onLoad:()=>L});var t=a(9950),n=a(73068),s=a(15255),r=a(11127),o=a(80415),i=a(52867),d=a(66345),h=a(14478),u=a(87988),p=a.n(u),w=a(44414);const c=t.lazy(()=>a.e(8689).then(a.bind(a,88689))),m=t.lazy(()=>a.e(5505).then(a.bind(a,25505))),j=t.lazy(()=>Promise.all([a.e(2772),a.e(4674)]).then(a.bind(a,84674))),g=t.lazy(()=>Promise.all([a.e(9540),a.e(8768),a.e(411)]).then(a.bind(a,56214))),b=t.lazy(()=>a.e(2665).then(a.bind(a,92665))),x=t.lazy(()=>Promise.all([a.e(804),a.e(8615),a.e(8940),a.e(6197),a.e(3464),a.e(2433)]).then(a.bind(a,13147))),D=t.lazy(()=>Promise.all([a.e(804),a.e(8940),a.e(6197),a.e(8389),a.e(3464),a.e(4877)]).then(a.bind(a,64877))),v=t.lazy(()=>a.e(9563).then(a.bind(a,79563))),f=t.lazy(()=>a.e(495).then(a.bind(a,20495))),S=t.lazy(()=>a.e(5600).then(a.bind(a,5600))),k=t.lazy(()=>a.e(8813).then(a.bind(a,88813))),y=t.lazy(()=>a.e(2833).then(a.bind(a,82833))),F=t.lazy(()=>a.e(2902).then(a.bind(a,82902))),P=t.lazy(()=>a.e(5002).then(a.bind(a,85002))),U=t.lazy(()=>Promise.all([a.e(8092),a.e(804),a.e(8615),a.e(6002),a.e(8370)]).then(a.bind(a,66937))),E=t.lazy(()=>Promise.all([a.e(8768),a.e(9430)]).then(a.bind(a,48768))),z=e=>{const l=document.createElement("script");l.src=e,l.defer=!0,document.head.appendChild(l)},I=!!window.isEditor,L=()=>{window.jQuery||z(`${o.M$}/js/jquery.min.js?ver=1`),z(`${o.M$}/js/slackdown.js?ver=1`)},W=e=>{var l;return e.loader&&null!=e.loader.loader&&null==e.error.errorWithMessage&&(!e.error.planLimit||d.HY)&&(null==e.error.themeError||Object.keys(e.error.themeError).length>0&&0==e.error.themeError.error_code||1===(null===(l=e.wall)||void 0===l?void 0:l.Personalization.demoWall))?(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(c,{...e})}):!d.HY&&(e.error.errorWithMessage||e.error.planLimit||e.error.themeError)?(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(m,{...e})}):null},M=(0,n.componentWillAppendToBody)(e=>{let{children:l}=e;return l}),_=e=>{let{appData:l}=e;const a=!!(l.wall.UserDetail&&Object.keys(l.wall.UserDetail).length>0);let t=""!=l.webFilters&&l.webFilters?l.webFilters.map(e=>{let{networkId:l}=e;return l}):null;const n=!(!a||l.wall.UserDetail.planId.includes("53"))||!!(d.uS&&l.wall.refere&&Object.keys(l.wall.refere).length>0),s=d.HY&&l.wall.User.referePageLink?l.wall.User.referePageLink:d.uS?l.wall.refere.referePageLink:(0,i.hZ)(t,l.wallID)[0],r=d.HY&&l.wall.User.referePage?l.wall.User.referePage:d.uS?l.wall.refere.referePage:(0,i.hZ)(t,l.wallID)[1];return n?(0,w.jsx)("a",{href:s,target:"_blank",style:{display:"none"},"aria-label":r,children:r}):null};class O extends t.Component{constructor(){super(...arguments),this.state={errorData:null,render:""},this.onLoadEditor=()=>{if(d.IU)try{window.addEventListener("message",this.handleMessage)}catch(e){console.log("error",e)}else window.location.href.includes("addfeedload=load")&&window.addEventListener("message",this.addFeedReloadTheme)},this.handleMessage=e=>{const{type:l,data:a}=e.data;if("reloadWebsite"==l){const e=JSON.parse(a);console.warn("payload 1",e),this.setState({render:(0,s.A)()});const{onUpdateEditor:l}=this.props;l(e)}},this.addFeedReloadTheme=e=>{const{type:l,data:a}=e.data;if("reloadTheme"==l){const{onUpdateEditor:e}=this.props;e(a)}}}componentWillMount(){d.aD&&(p().init(),a.e(7556).then(a.bind(a,67556)))}componentDidMount(){setTimeout(()=>L(),200),this.onLoadEditor()}componentDidUpdate(e,l){var a,t,n;let s=null===(a=e.appData.wall)||void 0===a||null===(t=a.Personalization)||void 0===t?void 0:t.demoWall;var r;(null===(n=e.appData.error)||void 0===n?void 0:n.themeError)!==l.errorData&&(this.setState({errorData:null===(r=e.appData.error)||void 0===r?void 0:r.themeError}),"function"===typeof window.onSetErrorCode&&null!==this.state.errorData&&window.onSetErrorCode(this.state.errorData,s))}componentWillUnmount(){d.IU?window.removeEventListener("message",this.handleMessage):window.location.href.includes("addfeedload=load")&&window.removeEventListener("message",this.addFeedReloadTheme)}render(){var e,l,a,n,s,r,o,h,u,p,c;const{appData:m,modalPop:z,spotlight:L}=this.props,{render:O}=this.state,A=!!(m&&m.wall&&Object.keys(m.wall).length>0&&m.wall.UserDetail&&Object.keys(m.wall.UserDetail).length>0),R=!(!d.aD||!L.status),T=null!==(e=m.wall)&&void 0!==e&&null!==(l=e.UgcSettings)&&void 0!==l&&l.onsite_status&&null!==(a=m.wall)&&void 0!==a&&null!==(n=a.PhotoBoothSettings)&&void 0!==n&&n.photo_booth_status?1:null!==(s=m.wall)&&void 0!==s&&null!==(r=s.PhotoBoothSettings)&&void 0!==r&&r.photo_booth_status?3:2;return(0,w.jsx)(w.Fragment,{children:!d.aD||window.location.href.includes("onsite-upload")||1!=m.isStudio||i.dm||I||window.location.href.includes("editor=1")?(0,w.jsxs)(w.Fragment,{children:[d.Vn?null:(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(F,{})}),m&&m.wall&&Object.keys(m.wall).length>0&&!window.location.href.includes("onsite-upload")?(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(j,{wall:m.wall})}):null,z.onSiteIsShowPopUp&&null!==m&&void 0!==m&&m.wall?(0,w.jsxs)(M,{children:["  ",(0,w.jsxs)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[" ",d.aD&&2!=T?(0,w.jsx)(g,{wall:null===m||void 0===m?void 0:m.wall,wallId:null===m||void 0===m||null===(o=m.wall)||void 0===o||null===(h=o.Wall)||void 0===h?void 0:h.id,feeds:null===m||void 0===m?void 0:m.feeds,isFreeAdsStatus:m.postData.isFreeAdsStatus,snapType:T}):(0,w.jsx)(E,{wall:null===m||void 0===m?void 0:m.wall,wallId:null===m||void 0===m||null===(u=m.wall)||void 0===u||null===(p=u.Wall)||void 0===p?void 0:p.id,feeds:null===m||void 0===m?void 0:m.feeds,isFreeAdsStatus:m.postData.isFreeAdsStatus})," "]})," "]}):null,(0,t.createElement)(W,{...m,key:O,keyRender:O,spotlight:L}),A&&m.wall.UserDetail.planId.includes("53")&&!d.aD?(0,w.jsxs)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(f,{appData:m})," "]}):null,null!==m&&void 0!==m&&null!==(c=m.postData)&&void 0!==c&&c.isFreeAdsStatus?(0,w.jsxs)(M,{children:[(0,w.jsxs)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(S,{appData:m})," "]}),window.location.href.includes("editor=1")?"":(0,w.jsxs)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(k,{appData:m})," "]})]}):null,!R&&z.isShowPopUp?d.HY&&(0,i.qs)()?(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(D,{wall:m.wall,data:z.data,languageSetting:m.languageSetting,networkData:m.networkData,postData:m.postData,brandingNetworks:""!=m.webFilters&&m.webFilters?m.webFilters.map(e=>{let{networkId:l}=e;return l}):null})})," "]}):(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(x,{wall:m.wall,isShowPopUp:z.isShowPopUp,data:z.data,languageSetting:m.languageSetting,networkData:m.networkData,postData:m.postData,brandingNetworks:""!=m.webFilters&&m.webFilters?m.webFilters.map(e=>{let{networkId:l}=e;return l}):null},z.isShowPopUp)})," "]}):null,d.aD&&!R&&m.announcements?(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(P,{announcements:m.announcements})}):null,z.reportStatus&&d.yR?(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(v,{item:z.reportData,wall:m.wall})})," "]}):null,z.shareStatus&&d.yR?(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(b,{postLink:z.shareData.link,userName:z.shareData.author.name})})," "]}):null,m&&m.wall&&Object.keys(m.wall).length>0&&d.yR?(0,w.jsx)(M,{children:(0,w.jsx)(_,{appData:m})}):null,R?(0,w.jsx)(t.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(U,{itemData:L.data,wall:m.wall})}):null]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(y,{wallID:m.wallID})})})}}const A=(0,r.Ng)(e=>({appData:e.appData,modalPop:e.modalPop,spotlight:e.spotlight}),e=>({onUpdateEditor:l=>e((0,h.qI)(l))}))(O)}}]);