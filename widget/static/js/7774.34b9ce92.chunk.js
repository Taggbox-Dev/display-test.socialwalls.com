"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[7774],{77774:(e,l,a)=>{a.r(l),a.d(l,{addScript:()=>E,default:()=>W,isEditor:()=>U,onLoad:()=>L});var n=a(47313),t=a(83773),r=a(95162),s=a(43411),o=a(98501),i=a(17739),d=a(35179),c=a(43635),p=a(92789),h=a.n(p),w=a(46417);const u=n.lazy((()=>a.e(4355).then(a.bind(a,44355)))),j=n.lazy((()=>a.e(3032).then(a.bind(a,53032)))),b=n.lazy((()=>Promise.all([a.e(182),a.e(5807)]).then(a.bind(a,75807)))),g=n.lazy((()=>a.e(9031).then(a.bind(a,9031)))),m=n.lazy((()=>a.e(8454).then(a.bind(a,28454)))),x=n.lazy((()=>Promise.all([a.e(6390),a.e(622),a.e(7529),a.e(6270),a.e(2198),a.e(6451)]).then(a.bind(a,417)))),f=n.lazy((()=>Promise.all([a.e(6390),a.e(7529),a.e(6270),a.e(7373),a.e(2198),a.e(2104)]).then(a.bind(a,52104)))),k=n.lazy((()=>a.e(339).then(a.bind(a,10339)))),D=n.lazy((()=>a.e(3607).then(a.bind(a,43607)))),S=n.lazy((()=>a.e(7029).then(a.bind(a,87029)))),y=n.lazy((()=>a.e(6105).then(a.bind(a,56105)))),F=n.lazy((()=>a.e(1174).then(a.bind(a,71174)))),v=n.lazy((()=>a.e(2579).then(a.bind(a,92579)))),P=n.lazy((()=>a.e(7958).then(a.bind(a,57958)))),z=n.lazy((()=>Promise.all([a.e(510),a.e(6390),a.e(622),a.e(5171),a.e(9605)]).then(a.bind(a,22990)))),E=e=>{const l=document.createElement("script");l.src=e,l.defer=!0,document.head.appendChild(l)},U=!!window.isEditor,L=()=>{window.jQuery||E("".concat(o.Mp,"/js/jquery.min.js?ver=1")),E("".concat(o.Mp,"/js/slackdown.js?ver=1"))},I=e=>{var l;return e.loader&&null!=e.loader.loader&&null==e.error.errorWithMessage&&(!e.error.planLimit||d.ig)&&(null==e.error.themeError||Object.keys(e.error.themeError).length>0&&0==e.error.themeError.error_code||1===(null===(l=e.wall)||void 0===l?void 0:l.Personalization.demoWall))?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(u,{...e})}):!d.ig&&(e.error.errorWithMessage||e.error.planLimit||e.error.themeError)?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(j,{...e})}):null},O=(0,t.componentWillAppendToBody)((e=>{let{children:l}=e;return l})),M=e=>{let{appData:l}=e;const a=!!(l.wall.UserDetail&&Object.keys(l.wall.UserDetail).length>0);let n=""!=l.webFilters&&l.webFilters?l.webFilters.map((e=>{let{networkId:l}=e;return l})):null;const t=!(!a||l.wall.UserDetail.planId.includes("53"))||!!(d.ZQ&&l.wall.refere&&Object.keys(l.wall.refere).length>0),r=d.ig&&l.wall.User.referePageLink?l.wall.User.referePageLink:d.ZQ?l.wall.refere.referePageLink:(0,i.$t)(n,l.wallID)[0],s=d.ig&&l.wall.User.referePage?l.wall.User.referePage:d.ZQ?l.wall.refere.referePage:(0,i.$t)(n,l.wallID)[1];return t?(0,w.jsx)("a",{href:r,target:"_blank",style:{display:"none"},"aria-label":s,children:s}):null};class C extends n.Component{constructor(){super(...arguments),this.state={errorData:null,render:""},this.onLoadEditor=()=>{if(d.Jc){const l=new BroadcastChannel("embedLivePreview");try{l.addEventListener("message",(e=>{const l=JSON.parse(null===e||void 0===e?void 0:e.data);console.warn("payload 1",l),this.setState({render:(0,r.Z)()});const{onUpdateEditor:a}=this.props;a(l)}))}catch(e){console.log("error",e)}}else d.bX&&window.location.href.includes("editor")&&window.location.href.includes("preview")&&window.location.href.includes("personalize")&&(console.log("df",d.bX&&window.location.href.includes("editor")&&window.location.href.includes("preview")&&window.location.href.includes("personalize")),window.addEventListener("message",this.handleMessage))},this.handleMessage=e=>{const{type:l,data:a}=e.data;if("reloadWebsite"==l){const e=JSON.parse(a);console.warn("payload 1",e),this.setState({render:(0,r.Z)()});const{onUpdateEditor:l}=this.props;l(e)}}}componentWillMount(){d.bX&&(h().init(),a.e(2389).then(a.bind(a,92389)))}componentDidMount(){setTimeout((()=>L()),200),this.onLoadEditor()}componentDidUpdate(e,l){var a,n,t;let r=null===(a=e.appData.wall)||void 0===a||null===(n=a.Personalization)||void 0===n?void 0:n.demoWall;var s;(null===(t=e.appData.error)||void 0===t?void 0:t.themeError)!==l.errorData&&(this.setState({errorData:null===(s=e.appData.error)||void 0===s?void 0:s.themeError}),"function"===typeof window.onSetErrorCode&&null!==this.state.errorData&&window.onSetErrorCode(this.state.errorData,r))}render(){var e;const{appData:l,modalPop:a,spotlight:t}=this.props,{render:r}=this.state,s=!!(l&&l.wall&&Object.keys(l.wall).length>0&&l.wall.UserDetail&&Object.keys(l.wall.UserDetail).length>0),o=!(!d.bX||!t.status);return(0,w.jsxs)(w.Fragment,{children:[o?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(z,{itemData:t.data,wall:l.wall})}):null,!d.bX||window.location.href.includes("onsite-upload")||1!=l.isStudio||i.cy||U||window.location.href.includes("editor=1")?(0,w.jsxs)(w.Fragment,{children:[d.aL?null:(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(v,{})}),l&&l.wall&&Object.keys(l.wall).length>0?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(b,{wall:l.wall})}):null,a.onSiteIsShowPopUp?(0,w.jsxs)(O,{children:["  ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(g,{})})]}):null,(0,n.createElement)(I,{...l,key:r,keyRender:r,spotlight:t}),s&&l.wall.UserDetail.planId.includes("53")&&!d.bX?(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(D,{appData:l})," "]}):null,null!==l&&void 0!==l&&null!==(e=l.postData)&&void 0!==e&&e.isFreeAdsStatus?(0,w.jsxs)(O,{children:[(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(S,{appData:l})," "]}),window.location.href.includes("editor=1")?"":(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(y,{appData:l})," "]})]}):null,!o&&a.isShowPopUp?d.ig&&(0,i.b)()?(0,w.jsxs)(O,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(f,{wall:l.wall,data:a.data,languageSetting:l.languageSetting,networkData:l.networkData,postData:l.postData,brandingNetworks:""!=l.webFilters&&l.webFilters?l.webFilters.map((e=>{let{networkId:l}=e;return l})):null})})," "]}):(0,w.jsxs)(O,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(x,{wall:l.wall,isShowPopUp:a.isShowPopUp,data:a.data,languageSetting:l.languageSetting,networkData:l.networkData,postData:l.postData,brandingNetworks:""!=l.webFilters&&l.webFilters?l.webFilters.map((e=>{let{networkId:l}=e;return l})):null},a.isShowPopUp)})," "]}):null,d.bX&&!o&&l.announcements?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(P,{announcements:l.announcements})}):null,a.reportStatus&&d.P2?(0,w.jsxs)(O,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(k,{item:a.reportData,wall:l.wall})})," "]}):null,a.shareStatus&&d.P2?(0,w.jsxs)(O,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(m,{postLink:a.shareData.link,userName:a.shareData.author.name})})," "]}):null,l&&l.wall&&Object.keys(l.wall).length>0&&d.P2?(0,w.jsx)(O,{children:(0,w.jsx)(M,{appData:l})}):null]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(F,{wallID:l.wallID})})]})}}const W=(0,s.$j)((e=>({appData:e.appData,modalPop:e.modalPop,spotlight:e.spotlight})),(e=>({onUpdateEditor:l=>e((0,c.cD)(l))})))(C)}}]);