"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[992],{3720(e,t,i){i.d(t,{A:()=>l});var a=i(9950),o=i(98776),s=i(19015),d=i(66345),r=i(44414);class n extends a.Component{constructor(e){super(e),this.calculatePadding=async()=>{const{data:e,size:t}=this.props;if(t)this.setState({paddingBottom:1===t?null:t});else if([3,4,5].includes(null===e||void 0===e?void 0:e.type))if(e.mediaHeight&&e.mediaWidth)this.setState({paddingBottom:100*e.mediaHeight/e.mediaWidth});else try{const{width:t,height:i}=await(0,o.pG)(e.postFileNew);this.setState({paddingBottom:100*i/t})}catch(i){this.setState({paddingBottom:100})}},this.initObserver=()=>{try{this.observer=new IntersectionObserver(e=>{let[t]=e;const i=this.videoRef.current;i&&(t.isIntersecting?(i.muted=!0,i.play().catch(()=>{})):(i.pause(),i.currentTime=0))},{threshold:.4}),this.wrapperRef.current&&this.observer.observe(this.wrapperRef.current)}catch(e){const t=this.videoRef.current;t&&(t.muted=!0,t.play().catch(()=>{}))}},this.state={paddingBottom:100,videoLoaded:!1},this.wrapperRef=a.createRef(),this.videoRef=a.createRef(),this.observer=null}componentDidMount(){this.calculatePadding(),this.initObserver()}componentWillUnmount(){this.observer&&this.wrapperRef.current&&this.observer.unobserve(this.wrapperRef.current);const e=this.videoRef.current;e&&(e.pause(),e.src="",e.load())}render(){const{VideoClass:e,data:t,wallID:i,isCover:a,controls:o,autoPlay:n,handleVideoEnded:l,muted:c,themeID:h,intervalTime:p}=this.props,{paddingBottom:u,videoLoaded:m}=this.state,v=[74,76,77].includes(h),w={paddingBottom:v&&d.aD?null:"".concat(u,"%")},f=null!==t&&void 0!==t&&t.loopStop?t.mediaUrl:t.mediaClip||t.mediaUrl;return(0,r.jsx)("div",{className:"".concat(e,"_wrap_ mediaHolder").concat(t.id),style:w,ref:this.wrapperRef,children:(0,r.jsx)("video",{ref:this.videoRef,className:"".concat(e," video").concat(t.id),muted:null===c||void 0===c||c,playsInline:!0,preload:"metadata",poster:t.postFileNew,controls:!!o,loop:!(null!==t&&void 0!==t&&t.loopStop),style:{width:"100%",height:"100%",objectFit:a?"cover":"contain",backgroundImage:m?"none":"url(".concat(t.postFileNew,")"),backgroundSize:"cover",backgroundPosition:"center"},"data-type":"video","data-network":t.network.id,"data-link":t.link,"data-wall-id":i,"data-item-id":t.id,"data-feed-id":t.feedId||"",onCanPlay:()=>d.HY?this.setState({videoLoaded:!1}):this.setState({videoLoaded:!0}),onEnded:l||null,onError:e=>{!d.yR||t.stories&&0!==t.stories||(0,s.zi)(e,t.id),v&&l&&setTimeout(()=>{l()},1e3*p)},children:(0,r.jsx)("source",{src:(g=f,b=t.network.id,25===b?String(g).replace("https://w.soundcloud.com/player/?url=",""):g),type:"video/mp4"})})});var g,b}}const l=(0,a.memo)(n)},67154(e,t,i){i.r(t),i.d(t,{default:()=>c});var a=i(9950),o=i(66345),s=i(15537),d=i(78262),r=i(3720),n=i(44414);const l=a.lazy(()=>i.e(4463).then(i.bind(i,44463))),c=e=>{let{itemData:t,wallID:i,ThemeID:c,ownerId:h,wall:p}=e;!o.HY||t.hotspot;const u=!(3!==t.type&&5!==t.type||1!=p.ThemeRule.autoPlay&&o.HY);return(0,n.jsxs)("div",{className:"tb_gf_media_wrap",children:[o.uS?(0,n.jsx)("div",{className:"tb_gf_social_top_",children:(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(n.Fragment,{}),children:(0,n.jsx)(l,{networkClass:"tb_gf_social__ico",network:t.network,isDefault:1===p.ThemeRule.iconType,ThemeRule:p.ThemeRule})})}):null,u?null:(0,n.jsx)(s.A,{itemData:t,IconClass:"tb_gf_media_icon",show:!0}),u?(0,n.jsx)(r.A,{VideoClass:"tb_gf_video",data:t,wallID:i,themeID:p.Personalization.widgetTheme,ownerId:h,autoPlay:!o.yR,size:1,isCover:!0,muted:!0}):(0,n.jsx)(d.default,{ImageClass:"tb_gf_image",data:t,wallID:i,themeID:c,ownerId:h,size:1,hotspot:!!t.hotspot})]})}}}]);