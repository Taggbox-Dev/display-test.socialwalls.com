"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var i=n(9950),l=n(10300),a=n(52867),s=n(80415),r=n(66345),o=n(78213),d=n(44414);const u=i.lazy((()=>n.e(2804).then(n.bind(n,2804)))),c=i.lazy((()=>n.e(4189).then(n.bind(n,34189)))),h=i.lazy((()=>n.e(1422).then(n.bind(n,51422)))),p=i.lazy((()=>n.e(56).then(n.bind(n,70056)))),v=i.lazy((()=>Promise.all([n.e(8400),n.e(629)]).then(n.bind(n,30629))));class g extends i.PureComponent{constructor(){super(),this.updateContainerSize=()=>{if(this.containerRef.current){const{wall:e}=this.props,{Banner:t,Ticker:n}=e;this.setState({cardHeight:window.innerHeight-(n.height+t.status?t.height:0)}),this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}})}},this.onLoadSpotLight=()=>{const{postData:e}=this.props;if(e.completeDataObject&&Object.keys(e.completeDataObject).length>0){var t=null;Object.entries(e.completeDataObject).forEach((e=>{let[n,i]=e;1==(null===i||void 0===i?void 0:i.highlight)&&null==t&&(t=i)})),t&&Object.keys(t).length>0&&(0,o.ar)(t)}},this.updateHeaderHeight=e=>{this.setState({CusBannerHeight:e})},this.state={containerSize:{width:null,height:null},CusBannerHeight:0,cardHeight:0,parentID:""},this.containerRef=i.createRef()}componentDidMount(){var e,t;(this.updateContainerSize(),window.addEventListener("resize",this.updateContainerSize),this.observer=new IntersectionObserver((e=>{let[t]=e;t.isIntersecting&&((0,a.KL)(),this.observer.disconnect())}),{threshold:.002}),null!==this&&void 0!==this&&null!==(e=this.containerRef)&&void 0!==e&&e.current)&&this.observer.observe(null===this||void 0===this||null===(t=this.containerRef)||void 0===t?void 0:t.current);r.aD&&!r.Vn&&this.onLoadSpotLight()}componentWillUnmount(){window.removeEventListener("resize",this.updateContainerSize)}componentDidUpdate(){var e;let t=document.querySelector(".tb_app_container"),n=a.wV?a.wV:null===t||void 0===t||null===(e=t.parentNode)||void 0===e?void 0:e.id;this.setState({parentID:n})}render(){var e,t,n,l,a,o,g;const{wall:b,reviewFilters:m,webFilters:f,postData:j,filter_tags:k}=this.props,{containerSize:w,parentID:S,cardHeight:x}=this.state,{SnapUp:D,ThemeInfo:H,Banner:B,CustomBanner:z,Ticker:C}=b,I=null===H||void 0===H?void 0:H.id,y=(null===D||void 0===D?void 0:D.ruleStatus)&&(r.HY&&![63,64,50].includes(I)||r.aD),_=![55,52,60,16,47,57,61].includes(I),F=r.MH?1===b.Personalization.filterStatus:!!(r.MH&&1===b.Personalization.filterStatus&&f&&f.length>1),R=!!(k&&k.length>0),L=!(!r.aD||null===b||void 0===b||null===(e=b.spotlight)||void 0===e||!e.status);let O=""!=f&&f&&f.length?f.map((e=>{let{Network:t}=e;return null===t||void 0===t?void 0:t.id})):null;!r.HY&&null!==b&&void 0!==b&&null!==(t=b.Background)&&void 0!==t&&t.image&&b.Background.image.includes(s.vr)&&(b.Background.image=String(b.Background.image).replace(s.Vy,""));const N=1===(null===b||void 0===b||null===(n=b.Background)||void 0===n?void 0:n.status)&&84!==I?{backgroundImage:null!==b&&void 0!==b&&null!==(l=b.Background)&&void 0!==l&&l.url?`url(${null===b||void 0===b||null===(a=b.Background)||void 0===a?void 0:a.url})`:"",backgroundColor:null===b||void 0===b||null===(o=b.Background)||void 0===o?void 0:o.color}:null,V=!![63,64].includes(I),P=!r.aD&&_&&(F||R)&&84!==I,T=V&&1==(null===(g=b.Reviews)||void 0===g?void 0:g.themeStatus)||r.aD||r.Vn,U=r.aD&&!r.Vn&&(null===C||void 0===C?void 0:C.status),E=U&&1==(null===C||void 0===C?void 0:C.position),M=U&&2==(null===C||void 0===C?void 0:C.position),W=((null===B||void 0===B?void 0:B.status)&&1===(null===B||void 0===B?void 0:B.position)||(null===z||void 0===z?void 0:z.status))&&!L,Y=(null===B||void 0===B?void 0:B.status)&&2==(null===B||void 0===B?void 0:B.position)&&!L;return(0,d.jsxs)("div",{className:"tb_app_container",ref:this.containerRef,children:[E?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(c,{Ticker:C})}):null,W?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(u,{Banner:B,CustomBanner:z,updateHeaderHeight:this.updateHeaderHeight})}):null,(0,d.jsxs)("div",{className:"tb_app_wrapper",style:N,children:[y?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(v,{SnapUp:D,id:I,webId:H.webId,wallId:H.wallId})," "]}):null,P?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(h,{type:b.Personalization.filter_type,webFilters:f,filter_tags:k,appendData:j.appendData,wall:b,postData:j})]}):"",T&&!L?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(p,{...this.props,cardHeight:x,brandingNetworks:O,containerSize:w,parentID:S,CusBannerHeight:this.state.CusBannerHeight})}):null]}),Y?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(u,{Banner:B,CustomBanner:z})}):null,M?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(c,{Ticker:C})}):null]})}}const b=(0,l.Ng)((e=>({renderId:e.renderId})),null)(g)}}]);