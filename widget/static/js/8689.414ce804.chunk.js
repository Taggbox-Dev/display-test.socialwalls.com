"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(9950),i=n(14478),s=n(11127),r=n(52867),l=n(80415),o=n(66345),d=n(78213),g=n(44414);const c=a.lazy((()=>n.e(2804).then(n.bind(n,2804)))),u=a.lazy((()=>n.e(726).then(n.bind(n,80726)))),h=a.lazy((()=>n.e(693).then(n.bind(n,50693)))),p=a.lazy((()=>Promise.all([n.e(9580),n.e(501)]).then(n.bind(n,40501)))),m=a.lazy((()=>n.e(56).then(n.bind(n,70056)))),b=a.lazy((()=>Promise.all([n.e(8400),n.e(5518)]).then(n.bind(n,65518))));class k extends a.PureComponent{constructor(){super(),this.handleResize=()=>{this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}})},this.onLoadSpotLight=()=>{if(o.aD&&!o.yR){const{postData:t}=this.props;if(t.completeDataObject&&Object.keys(t.completeDataObject).length>0){var e=null;Object.entries(t.completeDataObject).forEach((t=>{let[n,a]=t;1==(null===a||void 0===a?void 0:a.highlight)&&null==e&&(e=a)})),e&&Object.keys(e).length>0&&(0,d.ar)(e)}}},this.state={containerSize:{width:null,height:null},parentID:""},this.containerRef=a.createRef()}componentDidMount(){(0,r.j1)(this.props.wall.Personalization.widgetTheme),window.addEventListener("resize",this.handleResize),this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}}),this.onLoadSpotLight()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(){var e;let t=document.querySelector(".tb_app_container"),n=r.wV?r.wV:null===t||void 0===t||null===(e=t.parentNode)||void 0===e?void 0:e.id;this.setState({parentID:n})}render(){var e,t,n,i,s,d,k,f;const{wall:v,reviewFilters:S,webFilters:j,postData:w,languageSetting:B,filter_tags:x,spotlight:D}=this.props,z=!!(v.Banner&&Object.keys(v.Banner).length>0&&(1===v.Banner.status&&1===v.Banner.banner_position||1===v.BannerImage.status||"1"===v.Banner.banner_position)),_=!!(v.Banner&&Object.keys(v.Banner).length>0&&(1===v.Banner.status&&2===v.Banner.banner_position||"2"===v.Banner.banner_position)),y=o.uS?![55,60,16,47,57].includes(v.Personalization.widgetTheme):![55,52,60,16,47,57,61].includes(v.Personalization.widgetTheme),I=!!(!o.aD&&v.Banner&&Object.keys(v.Banner).length>0&&1===v.Banner.status&&6==v.Banner.bannerType&&0===v.Personalization.filterStatus&&57!=v.Personalization.widgetTheme),R=o.uS?1===v.Personalization.filterStatus:!!(j&&j.length>1),T=!!(x&&x.length>0),C=!(!o.aD||!D.status);let F=""!=j&&j&&j.length>0?j.map((e=>{let{Network:t}=e;return t.id})):null;!o.HY&&null!==v&&void 0!==v&&null!==(e=v.Background)&&void 0!==e&&e.image&&v.Background.image.includes(l.vr)&&(v.Background.image=String(v.Background.image).replace(l.Vy,""));const P=0===(null===v||void 0===v||null===(t=v.Background)||void 0===t?void 0:t.transparent)||null!==v&&void 0!==v&&null!==(n=v.Background)&&void 0!==n&&n.image&&o.uS?{backgroundImage:null!==v&&void 0!==v&&null!==(i=v.Background)&&void 0!==i&&i.image?`url(${v.Background.image})`:"",backgroundColor:null===v||void 0===v||null===(s=v.Background)||void 0===s?void 0:s.color}:null;return(0,g.jsxs)("div",{className:"tb_app_container "+(C?"tb_spotlight_ac":""),style:{minHeight:o.yR?[47,16,49,55,60,52].includes(v.Personalization.widgetTheme)?"100%":`${this.props.postHeight}px`:null},ref:this.containerRef,children:[o.aD&&!o.Vn&&1===(null===(d=v.CustomTicker)||void 0===d?void 0:d.status)&&1==v.CustomTicker.ticker_position?(0,g.jsx)(h,{CustomTicker:v.CustomTicker,UgcSettings:v.UgcSettings}):null,z&&!C?(0,g.jsxs)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(c,{Banner:v.Banner,BannerImage:v.BannerImage,LogoImage:v.LogoImage})]}):"",(0,g.jsxs)("div",{className:"tb_app_wrapper",style:P,children:[I&&z?(0,g.jsx)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:(0,g.jsx)(u,{reviewFilters:S,appendData:w.appendData,wall:v,languageSetting:B,postData:w})}):null,null!==v&&void 0!==v&&null!==(k=v.UserRule)&&void 0!==k&&k.on_site_upload&&v.UgcSettings.onsite_status||o.Qy&&v.UgcSettings.onsite_status&&(o.MH||o.HY&&!(0,r.Nv)(50))?(0,g.jsxs)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(b,{UgcSettings:v.UgcSettings,id:v.Wall.id,tagShopWallId:v.Wall.wallId})," "]}):null,!o.aD&&y&&(R||T)?(0,g.jsxs)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(p,{type:v.Personalization.filter_type,webFilters:j,filter_tags:x,appendData:w.appendData,wall:v,languageSetting:B,postData:w})]}):"",C?null:(0,g.jsxs)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(m,{...this.props,brandingNetworks:F,containerSize:this.state.containerSize,parentID:this.state.parentID})]}),I&&_?(0,g.jsx)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:(0,g.jsx)(u,{reviewFilters:S,appendData:w.appendData,wall:v,languageSetting:B,postData:w})}):null]}),_&&!C?(0,g.jsxs)(a.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(c,{Banner:v.Banner,BannerImage:v.BannerImage,LogoImage:v.LogoImage})]}):"",o.aD&&!o.Vn&&1===(null===(f=v.CustomTicker)||void 0===f?void 0:f.status)&&2==v.CustomTicker.ticker_position?(0,g.jsx)(h,{CustomTicker:v.CustomTicker,UgcSettings:v.UgcSettings}):null]})}}const f=(0,s.Ng)((e=>{if(!0===e.postHeight.manage_height){return{postHeight:e.postHeight.data.replace("px",""),renderId:e.renderId}}return{renderId:e.renderId}}),(e=>({managePostHeight:t=>e((0,i.V3)(t))})))(k)}}]);